# Базові конструкції мови R {#chapter2}


## План {-}

- [Оголошення та ініціалізація змінних](#chapter21)
    - [Поняття змінних та оператор присвоєння](#chapter211)
    - [Правила іменування змінних](#chapter212)
- [Базові типи даних](#chapter22)
    - [Типізація в R](#chapter221)
    - [Перевірка та привдення типів даних](#chapter222)
- [Оператори](#chapter23)
    - [Арифметичні оператори](#chapter231)
    
---

## Оголошення та ініціалізація змінних {#chapter21}

### Поняття змінних та оператор присвоєння {#chapter211}

Базовим поняттям практично усіх мов програмування є **змінна**. Змінна дозволяє записати значення або об'єкт та назвати його для подальшого доступу, зміни, видалення по імені.

Наприклад, присвоєння змінній `my_variable` значення `10` записується так: `my_variable <- 5` або `my_variable = 5`.

Операція надання змінній певного значення у програмуванні називається **присвоєнням**.

_Важливо! Зверніть увагу, що присвоєння (`<-`, `=`) та рівність (`==`) це різні поняття. Оператор `==` здіснює перевірку співпадіння значення двох змінних/об'єктів та повертає результат у вигляді логічного значення `TRUE` (якщо значення рівні) або `FALSE` (якщо значення не рівні)_.

Знак `<-` не є часто використовуваним у різних мовах програмування, зазвичай для присвоєння користуються `=`. Проте в R освновним способом засобом початкової ініціалізації змінних є `<-`.

_Також у програмуванні на R використовуються оператори присвоєння `<<-`, `->`, `->>`. Про них можна прочитати за лыками нижче._

<div class="alert alert-success">
<i class="fas fa-alrt fa-2x fa-link"></i>
 Рекомендую почитати про різницю між операторами присвоєння у R <code>&lt;-</code> та <code>=</code> тут:

 1. [Why do we use arrow as an assignment operator? (Colin FAY)](https://colinfay.me/r-assignment/).
 2. [Difference between assignment operators in R (Ren Kun)](https://renkun.me/2014/01/28/difference-between-assignment-operators-in-r/).
 3. [Assignment Operators](https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html).
</div>

Приклад:


```r
x <- 45
y <- 10
z <- x + y # z = 45 + 10
z
```

```
## [1] 55
```

Розберемо приклад, описаний вище:

* У першому рядку оголошується змінна `x` і їй присвоюється значення `45`.
* У другому рядку оголошується змінна `y` і їй присвоюється значення `10`.
* У третьому рядку оголошується змінна `z` і їй присвоюється значення суми `x` + `y`. <br>
<small><i>`#` у R використовується як коментар коду, текст написаний після нього ігнорується.</i></small>
* У четвертому рядку відбувається виведення на консоль змінної `z`.

### Правила іменування змінних {#chapter212}

Є кілька основних правил іменування змінних у R:
1. Ім'я змінної може складатися з **букв** [a-z, A-z], **цифр** [0-9], **крапки** `.` та нижнього **підкреслювання** `_`.
2. Ім'я змінної повинно починатися з **букви або крапки**. Якщо воно починається з крапки, то наступним символом повинна бути буква.
3. Не можна використовувати зарезервовані ключові слова мови програмування для іменування змінних, наприклад, `TRUE`/`FALSE`.

Ім'я змінної не може містити пробіл (`space`). Якщо є потреба назвати об'єкт кількома словами, то їх зазвичай розділяють підкресленням `_` або крапкою `.`. Наприклад, змінну можна назвати `my_variable_name` або `my.variable.name`. Назва `myVariableName` ([camel case](https://en.wikipedia.org/wiki/Camel_case)) теж буде коректно сприйнята мовою програмування R, проте такий запис тут вживається не часто.

<span class="text-success">Приклад коректного іменування змінних:</span> `total`, `zminna`, `Sum`, `.length_of_something`, `Number123, x_1`.

<span class="text-danger">Приклад неправильного іменування змінних:</span> `tot@l`, `5x_1`, `_variable`, `FALSE`, `.0ne`.

## Базові типи даних {#chapter22}

### Типізація в R {#chapter221}

Усі мови програмування мають власну типізацію даних з якими працюють. Тип даних - це набір властивостей певних об'єктів та операцій, що можна з ними виконувати. Так, наприклад, з **цілими числами** можна виконувати арифметичні операції додавання, віднімання та інші. Набори символів (простими словами **текст**) зазвичай можуть використовуватися для пошуку у них елементів, редагування (шляхом видалення частини існуючого або додавання нового тексту), склеювання та розділення на частини.

У `R`, на відміну від строго типізованих мов програмування, тип даних визначається на основі поточного значення елемента і може змінюватися у процесі виконання.

Розгялнемо приклад коду з мови програмування `C#` (мова родом із `C`/`Java`):

```csharp
int a = 10;
a = "some text";
```

Подібний код у `C#` передбачає створення нової змінної `a` типу `int` (`integer` - ціле число), а потім відбувається присвоєння для `a` текстового фрагмента (тип `string` у `С#`). Такий код не буде запущено і виникне <span class="text-danger">**помилка компіляції**</span>.

Розглянемо приклад коду з `R`:


```r
a <- 10
a <- "some text"
a
```

```
## [1] "some text"
```

Такий код виконається і на консоль буде виведено `some text`, адже у 1 першому рядку було присвоєно ціле число, у другому - текст. Таким чином `R` має **динамічну типізацію**, що дозволяє у ту ж саму змінну записати значення різних типів. Проте варто пам'ятати, що попереднє значення буде втрачено.

До базових типів даних у R варто віднести:

* Числа з дробовою частиною (`decimal numbers`), як наприклад, `4.0`, `15.214`, що називаються **`numeric(s)`**.
* Натуральні числа (`natural numbers`), як наприклад, `4`, `15`, що називаються **`integer(s)`**.
* Логічні значення (`boolean values`), тобто `TRUE` та `FALSE` (які також можна скорочено записувати `T` та `F`), що називаються **`logical`**.
* Текст або рядки (`string values`), як наприклад, `"Hello"`, `"12 is number"`, що називаються **`character(s)`**.

Оголосимо для прикладу три змінні: `my_numeric` - число, `my_character` - текст, `my_logical` - логічне значення.

```r
my_numeric <- 5
my_character <- "universe"
my_logical <- FALSE
```

Замінимо значення `my_character <- "5"` та спробуємо знайти суму значень:


```r
my_character <- "5"
my_sum <- my_numeric + my_character
```

У результаті виклання даного коду ми отримаємо помилку, адже значення `5` та `"5"` є елементами різних типів даних, перевіримо типи за допомогю функції `class()`:


```r
class(5)
```

```
## [1] "numeric"
```

```r
class("5")
```

```
## [1] "character"
```

Виконання коду `class(5)` показує нам, що `5`є значенням числового типу даних `numeric`, а `class("5")` відповідає тексту `character`, тому арифметична операція додавання між цими значеннями неможлива.

### Перевірка та привдення типів даних {#chapter222}

У випадку коли тип даних потрібно визначити у процесі виконання програми/коду та перетворити значення використовується приведння типів даних.

*Приведення типів даних* - операція перетворення значення з одного типу даних в інший. Важливо памятати, що не завжди приведення типів даних може бути здійснено. Так, наприклад, значення `"5"` (`character`) можна досить просто привести до `5` (`numeric`), проте `"five"` не буде зрозумілим для інтерпритатора.

Для перевірки належності елемента до певного типу даних використовують спеціальну функцію `is.назва_типу(значення)`. Ця функція повертає `TRUE`, якщо елемент належить даному типу і `FALSE`, якщо не належить.

Розглянемо приклад:


```r
my_numeric <- 5
my_character <- "five"
my_logical <- FALSE

is.numeric(my_numeric)
```

```
## [1] TRUE
```

```r
is.character(my_numeric)
```

```
## [1] FALSE
```

Для перетворення типу даних можна скористатися функцією `as.назва_типу(значення)`. У результаті виконання функції буде повернуто значення потрібного типу або пусте значення `NA`, якщо таке приведення не є можливим:


```r
a <- 5
b <- "10"
c <- "10, 20"
as.numeric(b)
```

```
## [1] 10
```

```r
as.numeric(c)
```

```
## Warning: NAs introduced by coercion
```

```
## [1] NA
```

Результат виконання функцій можна записувати у змінні і використовувати у наступних обчисленнях:


```r
a <- 5
b <- "10"
b <- as.numeric(b)
a + b
```

```
## [1] 15
```


```r
number <- as.integer(54)
typeof(number)
```

```
## [1] "integer"
```

```r
class(number)
```

```
## [1] "integer"
```

Повний перелік типів та методів перевірки і приведення їх типів ображений нижче:

| Назва типу | Метод перевірки типу | Метод приведення типу |
|---------|---------|--------|
|Array|is.array|as.array|
|**Character**|is.character|as.character|
|Complex |is.complex |as.complex|
|Dataframe |is.data.frame |as.data.frame|
|**Double** |is.double |as.double|
|Factor |is.factor |as.factor|
|List |is.list| as.list|
|**Logical** |is.logical |as.logical|
|Matrix |is.matrix |as.matrix|
|**Numeric** |is.numeric |as.numeric
|Raw| is.raw| as.raw|
|Time series (ts)| is.ts| as.ts|
|Vector| is.vector |as.vector|

---

## Оператори {#chapter23}

### Арифметичні оператори {#chapter231}
